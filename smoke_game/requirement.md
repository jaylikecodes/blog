# 요구사항 명세서: Smoke Game

## 1. 개요

본 문서는 "Smoke Game"을 재구현하기 위한 요구사항을 정의합니다. "Smoke Game"은 플레이어가 캐릭터를 조종하여 적을 물리치는 간단한 2D 액션 게임으로, 연기 효과와 동적인 배경이 특징입니다.

## 2. 게임 목표

* 플레이어는 자신의 캐릭터를 조종하여 적 캐릭터를 물리쳐야 합니다.
* 플레이어의 체력이 모두 소진되기 전에 적을 먼저 물리치는 것이 주 목표입니다.

## 3. 핵심 게임플레이 메커니즘

### 3.1. 플레이어 캐릭터

* **표현**: 화면에 시각적으로 표시되는 캐릭터입니다.
* **초기 위치**: 화면 하단 특정 Y축 위치 (예: `yFloorOffset` 적용).
* **체력 (Health)**: 플레이어는 일정량의 체력을 가집니다. 체력이 0이 되면 게임 오버됩니다.
* **조작**:
    * **이동**: 왼쪽/오른쪽 화살표 키를 사용하여 좌우로 이동합니다.
    * **공격**: 스페이스 바를 눌러 공격합니다.
* **공격 메커니즘**:
    * 근접 공격 형태입니다.
    * 플레이어가 적 캐릭터와 충분히 가까운 거리에서 공격해야만 적에게 데미지를 줄 수 있습니다.

### 3.2. 적 캐릭터

* **표현**: 화면에 시각적으로 표시되는 적대적 캐릭터입니다.
* **초기 위치**: 화면 하단 특정 Y축 위치 (예: `yFloorOffset` 적용), 플레이어와 구분되는 위치.
* **체력 (Health)**: 적 캐릭터는 일정량의 체력을 가집니다. 체력이 0이 되면 플레이어가 승리합니다 (또는 다음 레벨로).
* **AI**: (간단한 수준)
    * 기본적으로 화면 내에 존재하며 플레이어의 공격 대상이 됩니다.
    * (선택 사항) 좌우로 일정 패턴으로 움직이거나, 플레이어에게 천천히 다가오는 등의 간단한 행동 패턴을 가질 수 있습니다.

### 3.3. 전투 시스템

* 플레이어가 공격에 성공하면 적의 체력이 감소합니다.
* (선택 사항) 적이 플레이어를 공격하여 플레이어의 체력을 감소시키는 기능을 추가할 수 있습니다.
* 플레이어 또는 적의 체력이 0이 되면 전투가 종료됩니다.

### 3.4. 연기 효과 (Smoke Effect)

* **발생 조건**:
    * 플레이어의 공격 시.
    * 캐릭터가 데미지를 입었을 때 (선택 사항).
    * 플레이어 캐릭터 사망 시 (사망한 X좌표, `playerDeathX`를 중심으로).
* **시각적 표현**:
    * 다수의 `SmokeParticle` 객체로 구성됩니다.
    * 각 입자는 발생 지점에서 서서히 퍼져나가며 크기가 변하거나 투명해지면서 사라지는 효과를 가집니다.
    * 연기 분출은 일정 시간 동안 지속됩니다 (예: `smokeEmissionDuration`, `smokeEmissionTimer` 사용).
* **구현**: `SmokeParticle` 클래스 또는 객체를 통해 각 입자의 속성(위치, 크기, 색상, 투명도, 수명 등) 및 움직임을 관리합니다.

### 3.5. 점수 시스템

* `score` 변수로 플레이어의 점수를 관리합니다.
* 적에게 데미지를 입히거나, 적을 물리쳤을 때 점수가 증가합니다.
* 점수는 게임 화면에 표시됩니다.

## 4. 게임 상태 관리

게임은 다음 상태들을 가집니다 (`gameState` 변수 사용):

* **`start` (시작 화면)**:
    * 게임 제목 표시.
    * 게임 시작 안내 메시지 표시 (예: "Press Enter to Start").
* **`playing` (게임 진행 중)**:
    * 플레이어와 적 캐릭터가 활성화됩니다.
    * 핵심 게임플레이 메커니즘이 동작합니다.
    * 점수, 체력 등 게임 정보가 화면에 표시됩니다.
* **`gameOver` (게임 오버)**:
    * 플레이어의 체력이 0이 되거나, 정해진 패배 조건을 만족했을 때 전환됩니다.
    * 게임 오버 메시지, 최종 점수 표시.
    * 게임 재시작 안내 메시지 표시 (예: "Press Enter to Restart").
* **게임 재시작**:
    * `gameOver` 상태에서 Enter 키를 누르면 `resetGame()` 함수가 호출되어 게임 상태, 플레이어/적의 상태, 점수 등을 초기화하고 `playing` 상태로 전환됩니다.

## 5. 시각 및 기술적 요구사항

### 5.1. 그래픽 및 시각 효과

* **스타일**: 간단한 2D 그래픽.
* **게임 영역**: HTML `<canvas>` 요소 내에 p5.js를 사용하여 렌더링합니다. (`<div id="game-canvas"></div>`)
* **동적 배경**: 배경색의 색조(Hue)가 `frameCount`에 따라 부드럽게 지속적으로 변하는 효과를 구현합니다.
* **UI 요소**:
    * 게임 제목 (`<h1><span data-text="smoke-game-title">Smoke Game</span></h1>`)
    * 게임 설명 및 조작 방법 안내 텍스트.
    * 플레이어 체력, 적 체력 (시각적 표현, 예: 바 형태 또는 텍스트).
    * 현재 점수.

### 5.2. 기술 스택

* **주요 기술**: HTML5, CSS3, JavaScript.
* **드로잉 라이브러리**: p5.js (CDN 링크: `https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js`).
* **파일 구조 (예상)**:
    * `index.html`: 기본 HTML 구조 및 게임 컨테이너.
    * `styles.css`: 게임 페이지의 스타일링.
    * `sketch.js` (또는 `index.html` 내 `<script>`): p5.js를 사용한 주 게임 로직 (setup, draw, keyPressed, 클래스 정의 등).
    * (다국어 지원 시) `js/translations.js`: 번역 텍스트 모듈.

### 5.3. 화면 반응성

* `windowResized()` 함수를 구현하여 브라우저 창 크기가 변경될 때 캔버스 크기를 적절히 조절합니다.

## 6. (선택) 추가 기능: 다국어 지원

* **지원 언어**: 한국어 (기본값), 영어.
* **구현 방식**:
    * `translations.js` 파일에 언어별 텍스트 문자열을 객체 형태로 저장합니다.
    * URL 파라미터 (`?lang=en` 또는 `?lang=ko`)를 통해 초기 언어를 설정할 수 있습니다.
    * 화면 내에 언어 변경 버튼 (예: "한국어", "English")을 제공하여 사용자가 언어를 동적으로 변경할 수 있게 합니다.
    * HTML 요소 중 텍스트가 필요한 부분은 `data-text` 속성을 사용하여 번역 키를 지정하고, JavaScript를 통해 해당 키에 맞는 텍스트로 업데이트합니다.
    * `window.gameTranslations` 객체를 통해 번역 관련 함수 및 현재 언어 상태를 관리합니다.

## 7. 주요 코드 구성 요소 (클래스/객체)

* **`Player` 클래스/객체**: 플레이어의 속성(위치, 크기, 체력, 속도) 및 메소드(이동, 공격, 그리기, 데미지 처리) 정의.
* **`Enemy` 클래스/객체**: 적의 속성(위치, 크기, 체력) 및 메소드(움직임 (선택), 그리기, 데미지 처리) 정의.
* **`SmokeParticle` 클래스/객체**: 연기 입자의 속성(위치, 크기, 색상, 투명도, 수명, 이동 방향/속도) 및 메소드(업데이트, 그리기) 정의.

## 8. 비기능적 요구사항

* 코드는 이해하기 쉽고 주석을 통해 설명이 잘 되어 있어야 합니다.
* 게임은 부드럽게 실행되어야 하며, 눈에 띄는 성능 저하가 없어야 합니다.